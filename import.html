

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Import &mdash; Barista 0.1 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="_static/language_data.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Correct" href="correct.html" />
    <link rel="prev" title="Quick start" href="quickstart.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> Barista
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Table of Content:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="setup.html">Setup</a></li>
<li class="toctree-l1"><a class="reference internal" href="quickstart.html">Quick start</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Import</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#usage">Usage</a></li>
<li class="toctree-l2"><a class="reference internal" href="#setting-file">Setting file</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#description">Description</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#note">Note</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#multiple-read-structure-patterns">Multiple read structure patterns</a></li>
<li class="toctree-l3"><a class="reference internal" href="#simple-format-for-read-structure-specification">Simple format for read structure specification</a></li>
<li class="toctree-l3"><a class="reference internal" href="#computational-time-and-memory-consumption">Computational time and memory consumption</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="correct.html">Correct</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Barista</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Import</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/import.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="import">
<span id="header-n0"></span><h1>Import<a class="headerlink" href="#import" title="Permalink to this headline">¶</a></h1>
<p><code class="docutils literal notranslate"><span class="pre">import</span></code> command is used to extract sequnce fragments by specified
format. The read structure is parsed as regular expression as default,
but it can also be described as ‘simple’ format.</p>
<div class="section" id="usage">
<span id="header-n6"></span><h2>Usage<a class="headerlink" href="#usage" title="Permalink to this headline">¶</a></h2>
<div class="code shell highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">barista</span> \
<span class="o">-</span><span class="n">cmd</span> <span class="kn">import</span> \
<span class="o">-</span><span class="n">conf</span> <span class="n">config</span><span class="o">.</span><span class="n">conf</span> \
<span class="o">-</span><span class="n">R1</span> <span class="n">input_R1</span><span class="o">.</span><span class="n">fastq</span><span class="o">.</span><span class="n">gz</span> \
<span class="o">-</span><span class="n">R2</span> <span class="n">input_R2</span><span class="o">.</span><span class="n">fastq</span><span class="o">.</span><span class="n">gz</span> \
<span class="o">-</span><span class="n">fq_gz</span> \
<span class="o">-</span><span class="n">d</span> <span class="n">output_directory</span> \
<span class="o">-</span><span class="n">o</span> <span class="n">output_filename</span>
</pre></div>
</div>
<table border="1" class="docutils">
<colgroup>
<col width="33%" />
<col width="33%" />
<col width="33%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Option</th>
<th class="head">Required</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>-cmd</td>
<td>○</td>
<td>barista command
(import).</td>
</tr>
<tr class="row-odd"><td>-conf</td>
<td>○</td>
<td>Setting file. See
below how to write
the config file.</td>
</tr>
<tr class="row-even"><td>-R1</td>
<td>×</td>
<td>Input fastq file,
read1.</td>
</tr>
<tr class="row-odd"><td>-R2</td>
<td>×</td>
<td>Input fastq file,
read2.</td>
</tr>
<tr class="row-even"><td>-I1</td>
<td>×</td>
<td>Input fastq file,
index1.</td>
</tr>
<tr class="row-odd"><td>-I2</td>
<td>×</td>
<td>Input fastq file,
index2.</td>
</tr>
<tr class="row-even"><td>-fq_gz</td>
<td>×</td>
<td>The Input fastq files
are copressed as gzip
format. As default,
fastq files are
regarded as
un-compressed.</td>
</tr>
<tr class="row-odd"><td>-simple</td>
<td>×</td>
<td>Read structure is
described as ‘simple’
format, not regular
expression.</td>
</tr>
<tr class="row-even"><td>-d</td>
<td>×</td>
<td>Output directory.</td>
</tr>
<tr class="row-odd"><td>-o</td>
<td>×</td>
<td>Output file name.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="setting-file">
<span id="header-n279"></span><h2>Setting file<a class="headerlink" href="#setting-file" title="Permalink to this headline">¶</a></h2>
<div class="code highlight-default notranslate"><div class="highlight"><pre><span></span>[import]
src_raw_components=segment1, segment2, segment3, segment4, segment5
barcodes=segment1,segment4,segment3
Read1_src=^(?P&lt;segment1&gt;.{9,10})(?P&lt;segment2&gt;CAGAGC){s&lt;=2}(?P&lt;segment3&gt;.{8})(?P&lt;segment4&gt;.{10}).*$
Read2_src=(?P&lt;segment5&gt;.*)
Index1_src=
Index2_src=
</pre></div>
</div>
<div class="section" id="description">
<span id="header-n178"></span><h3>Description<a class="headerlink" href="#description" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p class="first">src_raw_components <strong>(Required)</strong></p>
<p>The name of each component used in this <code class="docutils literal notranslate"><span class="pre">import</span></code> section, listed in
comma-separated format. Here, segment1~5 were set as the components
in this sequencing platform (specicically, this is a sciRNA-seq3
structure and seqment1~5 respectively corresponds to cell barcode1,
constant sequence, UMI, cell barcode2 and biological sequence).</p>
</li>
<li><p class="first">barcodes <strong>(Required)</strong></p>
<p>The names of components listed in comma-separated format whose
sequences are to be corrected and converted into other barcode
sequneces of the destination sequence structure in following steps.</p>
</li>
<li><p class="first">Read1_src, Read2_src, Index1_src, Index2_src</p>
<p>The sequence structure of each read written in regular expression.
Use component names specified in <code class="docutils literal notranslate"><span class="pre">src_raw_components</span></code> for the
corresponding groups. Here, first 9 or 10 bases (in this case, cell
barcode1) are extracted as segment1, subsequent CAGAGC (constant) is
extracted as segment2 allowing 2 mismatches and next 8 and 10 bases
(UMI and cell barcode2) are respectivery extracted as segment 4 and 5
in read1. In read2, whole sequences are assigned to
segment5(biological sequence). See the details about fuzzy matching
<a class="reference external" href="https://pypi.org/project/regex/">here</a>.</p>
</li>
</ul>
</div>
</div>
<div class="section" id="note">
<span id="header-n217"></span><h2>Note<a class="headerlink" href="#note" title="Permalink to this headline">¶</a></h2>
<div class="section" id="multiple-read-structure-patterns">
<span id="header-n223"></span><h3>Multiple read structure patterns<a class="headerlink" href="#multiple-read-structure-patterns" title="Permalink to this headline">¶</a></h3>
<p>User can specify multiple patterns for the read structures.</p>
<div class="code shell highlight-default notranslate"><div class="highlight"><pre><span></span>[import]
src_raw_components=segment1, segment2, segment3, segment4, segment5
barcodes=segment1,segment4,segment3
Read1_src=^(?P&lt;segment1&gt;.{9,10})(?P&lt;segment2&gt;CAGAGC){s&lt;=2}(?P&lt;segment3&gt;.{8})(?P&lt;segment4&gt;.{10}).*$
Read1_src2=^.*(?P&lt;segment1&gt;.{9,10})(?P&lt;segment2&gt;CAGAGC){s&lt;=2}(?P&lt;segment3&gt;.{8})(?P&lt;segment4&gt;.{10}).*$
Read2_src=(?P&lt;segment5&gt;.*)
</pre></div>
</div>
<p>In this setting file, 2 read patterns are set for read1. In this case,
first the pattern in Read1_src are searched and if it is not found,
then the pattern in Read1_src2 is used for search.</p>
</div>
<div class="section" id="simple-format-for-read-structure-specification">
<span id="header-n231"></span><h3>Simple format for read structure specification<a class="headerlink" href="#simple-format-for-read-structure-specification" title="Permalink to this headline">¶</a></h3>
<p>Since the regular expression matching is computationaly slow, ‘simple’
format can also be available for the read structure specification.
Especially for simple structure with fixed component length and no
constant sequence, this ‘simple’ format will be better than regular
expression. Example for the 10X Chromium v3:</p>
<div class="code shell highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">import</span><span class="p">]</span>
<span class="n">src_raw_components</span><span class="o">=</span><span class="n">segment1</span><span class="p">,</span> <span class="n">segment2</span><span class="p">,</span> <span class="n">segment3</span>
<span class="n">barcodes</span><span class="o">=</span><span class="n">segment1</span><span class="p">,</span><span class="n">segment2</span>
<span class="n">Read1_src</span><span class="o">=&lt;</span><span class="n">segment1</span><span class="p">:</span><span class="mi">16</span><span class="o">&gt;&lt;</span><span class="n">segment2</span><span class="p">:</span><span class="mi">12</span><span class="o">&gt;</span>
<span class="n">Read2_src</span><span class="o">=&lt;</span><span class="n">segment3</span><span class="p">:</span><span class="mi">0</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>Here, simplified read structure is shown in Read1<em>src and Read2</em>src
where 16 bases for segment1 (In this case, cell barcode) and 12 bases
for segment 2 (UMI) are sequenced in read1 and all bases of read2 are
sequenced as segment3 (biological sequence).</p>
<p><strong>Note:</strong>The length ‘0’ means the segment from the current position to
the end. For example,</p>
<div class="code highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">segment1</span><span class="p">:</span><span class="mi">10</span><span class="o">&gt;&lt;</span><span class="n">segment2</span><span class="p">:</span><span class="mi">15</span><span class="o">&gt;&lt;</span><span class="n">segment3</span><span class="p">:</span><span class="mi">0</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>means the first 10 bases for segment1, next 15 bases for segment2 and
the lest bases are assigned to segment3.</p>
</div>
<div class="section" id="computational-time-and-memory-consumption">
<span id="header-n245"></span><h3>Computational time and memory consumption<a class="headerlink" href="#computational-time-and-memory-consumption" title="Permalink to this headline">¶</a></h3>
<p>Computational time linearly depends on the size of input file size.
Memory consumption depends on the sequence length. Basically, it
requires 2~5GB memory for 4million reads processing. For 4 million
reads, sciRNA-seq3(R1:36bp, R2:56bp) barcode extraction with regular
expression took about 9mins and 1.5GB memory, and 10X Visium(R1:28bp,
R2:120bp) barcode extraction with simple format took about 12mins and
3.5GB memory.</p>
<p>When you use barista in cluster server system, splitting input fastq
file into 1million~4million reads per file is recommended.</p>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="correct.html" class="btn btn-neutral float-right" title="Correct" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="quickstart.html" class="btn btn-neutral float-left" title="Quick start" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2020, Yusuke Kijima, Yachie Lab

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>